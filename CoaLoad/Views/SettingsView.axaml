<UserControl
    d:DesignHeight="450"
    d:DesignWidth="800"
    mc:Ignorable="d"
    x:Class="CoaLoad.Views.SettingsView"
    x:DataType="vm:SettingsViewModel"
    xmlns="https://github.com/avaloniaui"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:dialogHost="clr-namespace:DialogHostAvalonia;assembly=DialogHost.Avalonia"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:vm="clr-namespace:CoaLoad.ViewModels"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
    <UserControl.Resources>
        <StreamGeometry x:Key="save_regular">M3 5.75C3 4.23122 4.23122 3 5.75 3H15.7145C16.5764 3 17.4031 3.34241 18.0126 3.9519L20.0481 5.98744C20.6576 6.59693 21 7.42358 21 8.28553V18.25C21 19.7688 19.7688 21 18.25 21H5.75C4.23122 21 3 19.7688 3 18.25V5.75ZM5.75 4.5C5.05964 4.5 4.5 5.05964 4.5 5.75V18.25C4.5 18.9404 5.05964 19.5 5.75 19.5H6V14.25C6 13.0074 7.00736 12 8.25 12H15.75C16.9926 12 18 13.0074 18 14.25V19.5H18.25C18.9404 19.5 19.5 18.9404 19.5 18.25V8.28553C19.5 7.8214 19.3156 7.37629 18.9874 7.0481L16.9519 5.01256C16.6918 4.75246 16.3582 4.58269 16 4.52344V7.25C16 8.49264 14.9926 9.5 13.75 9.5H9.25C8.00736 9.5 7 8.49264 7 7.25V4.5H5.75ZM16.5 19.5V14.25C16.5 13.8358 16.1642 13.5 15.75 13.5H8.25C7.83579 13.5 7.5 13.8358 7.5 14.25V19.5H16.5ZM8.5 4.5V7.25C8.5 7.66421 8.83579 8 9.25 8H13.75C14.1642 8 14.5 7.66421 14.5 7.25V4.5H8.5Z</StreamGeometry>
    </UserControl.Resources>
    <UserControl.DataTemplates>
        <DataTemplate DataType="vm:SettingsViewModel">
            <StackPanel VerticalAlignment="Center">
                <TextBlock Text="Enter custom instance URL" />

                <TextBox
                    HorizontalAlignment="Stretch"
                    Margin="0,8,0,0"
                    x:Name="CustomInstanceTextBox" />

                <StackPanel HorizontalAlignment="Center" Orientation="Horizontal">
                    <Button
                        Classes="Flat"
                        Command="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType=dialogHost:DialogHost}, Path=CloseDialogCommand}"
                        CommandParameter="{Binding #CustomInstanceTextBox.Text}"
                        Content="Ok"
                        IsDefault="True"
                        Margin="0,8,8,0" />

                    <Button
                        Classes="Flat"
                        Command="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType=dialogHost:DialogHost}, Path=CloseDialogCommand}"
                        Content="Cancel"
                        IsCancel="True"
                        Margin="0,8,8,0" />
                </StackPanel>
            </StackPanel>
        </DataTemplate>
    </UserControl.DataTemplates>
    <StackPanel HorizontalAlignment="Center" Spacing="12">

        <dialogHost:DialogHost DialogClosing="CustomInstance_OnDialogClosing" Identifier="CustomInstanceDialogHost">
            <dialogHost:DialogHost.DialogContent />
            <StackPanel>
                <ComboBox
                    ItemsSource="{Binding InstanceOptions}"
                    Name="InstanceComboBox"
                    SelectedItem="{Binding SelectedInstance, Mode=TwoWay}"
                    Width="300">
                    <ComboBox.ItemTemplate>
                        <DataTemplate>
                            <TextBlock Text="{Binding}" />
                        </DataTemplate>
                    </ComboBox.ItemTemplate>
                </ComboBox>
                <Button Command="{Binding SaveCommand}" Content="Save" />
            </StackPanel>
        </dialogHost:DialogHost>


    </StackPanel>
</UserControl>